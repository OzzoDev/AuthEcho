import{a4 as g,Y as C,r as u,j as e,S as b,a5 as j,X as N,H as w,s as y,Z as S,a6 as U,n as E}from"./index-BrTf-wJD.js";import{D as x}from"./DataLabel-CAM4N43F.js";import{D as P}from"./DeleteCommand-TduJGgnZ.js";import{P as A}from"./Paginator-CiOTWxgS.js";import{S as v}from"./SearchBarFlat-DZsCl2Wp.js";import"./index-D-R-Awvj.js";import"./clsx-B-dksMZM.js";function L({userData:n}){const{callApi:m}=g("POST","DELETEUSER"),{callApi:o}=g("POST","FREEZEACCOUNT"),{updateOverviewProperty:c}=C(),[r,d]=u.useState({username:n.name}),p=a=>{const{name:s,value:t}=a.target;d(l=>({...l,[s]:t}))},f=async()=>{const a=await m(!0,r),s=a==null?void 0:a.data.users;s&&c("users",s.map(t=>({...t,isVisible:!0})))},i=async()=>{const a=await o(!0,r),s=a==null?void 0:a.data.users;s&&c("users",s.map(t=>({...t,isVisible:!0})))};return e.jsxs("div",{className:"flex flex-col md:flex-row items-center md:justify-between gap-y-4 w-full",children:[e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsx(x,{label:"Username",data:n.name}),e.jsx(x,{label:"Email",data:n.email}),e.jsx(x,{label:"Last login",data:n.lastLogin}),e.jsx(x,{label:"Account created at",data:n.createdAt})]}),e.jsxs("div",{className:"flex flex-col items-center md:items-end gap-y-8",children:[n.isFrozen?e.jsx(b,{btnText:"Unfreeze account",onClick:i,icon:e.jsx(j,{size:20})}):e.jsx(N,{btnText:"Freeze account",onClick:i,icon:e.jsx(j,{size:20})}),e.jsx(P,{command:`delete ${n.name}`,name:"deleteCommand",value:r.deleteCommand||"",placeholder:`delete ${n.name}`,onChange:p,onSubmit:f})]})]})}const h=10;function V(){const{status:n,overview:m}=C(),[o,c]=u.useState([]),[r,d]=u.useState({current:1,latest:1,pageCount:1});u.useEffect(()=>{const s=m.users;s&&c(s)},[m,c]);const p=s=>{const t=o.map(l=>({...l,isVisible:l.name.toLowerCase().includes(s.toLowerCase())||l.email.toLowerCase().includes(s.toLowerCase())}));c(t),d(l=>({...l,current:s?1:l.latest,pageCount:E(t,h)}))},f=(s,t)=>{d(l=>({...l,current:t,latest:t}))};if(n==="loading")return e.jsx(w,{size:50,color:"white",className:"m-auto"});if(o.length===0)return e.jsx("h2",{className:"text-2xl font-semibold text-cyan-300 ml-[20px] pt-[30px] pb-[60px]",children:"No users connected"});const i=[...o].filter(s=>s.isVisible).filter((s,t)=>y(t,r.current,h)),a=o.length>h&&i.length>0;return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex gap-x-2 items-center p-4",children:[e.jsx(S,{size:24}),e.jsxs("p",{className:"text-gray-400",children:["UsersÂ ",e.jsx("span",{className:"text-cyan-300 font-semibold",children:U(o.length)})]})]}),e.jsxs("div",{className:"flex flex-col gap-y-6 p-4",children:[e.jsx(v,{onChange:p}),a&&e.jsx("div",{className:"flex justify-center py-6",children:e.jsx(A,{onChange:f,count:r.pageCount})})]}),i.length===0?e.jsx("h2",{className:"text-2xl font-semibold text-cyan-300 ml-[20px] pt-[30px] pb-[60px]",children:"No matching user"}):e.jsx("ul",{className:"flex flex-col gap-y-24 p-6 my-12",children:i.map(s=>e.jsx("li",{children:e.jsx(L,{userData:s})},s.name))})]})}export{V as default};
