import{a4 as A,Y as N,r as m,p as P,j as e,S as w,a5 as C,X as v,n as S,H as E,s as z,G as O,a6 as L}from"./index-BrTf-wJD.js";import{D as x}from"./DataLabel-CAM4N43F.js";import{D as R}from"./DeleteCommand-TduJGgnZ.js";import{S as T}from"./SearchBarFlat-DZsCl2Wp.js";import{P as B}from"./Paginator-CiOTWxgS.js";import"./index-D-R-Awvj.js";import"./clsx-B-dksMZM.js";function F({appData:s}){const{callApi:c}=A("POST","DELETEAPP"),{callApi:a}=A("POST","FREEZEAPP"),{updateOverviewProperty:i}=N(),[n,f]=m.useState({app:s.name}),g=l=>{const{name:o,value:d}=l.target;f(t=>({...t,[o]:d}))},u=async()=>{const l=await c(!0,n),o=l==null?void 0:l.data.apps;o&&i("apps",o.map(d=>({...d,isVisible:!0})))},h=async()=>{const l=await a(!0,n),o=l==null?void 0:l.data.apps;o&&i("apps",o.map(d=>({...d,isVisible:!0})))},j=P(s.admins);return e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-x-20 gap-y-6 w-full",children:[e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsx(x,{label:"Username",data:s.name}),e.jsx(x,{label:"Origin",data:s.origin}),e.jsx(x,{label:"Creator",data:s.creator}),j&&e.jsx(x,{label:"Admins",data:j}),e.jsx(x,{label:"Status",data:s.status}),e.jsx(x,{label:"Users",data:String(s.users)}),s.description&&e.jsx(x,{label:"Description",data:s.description})]}),e.jsxs("div",{className:"flex flex-col items-end gap-y-8",children:[s.isFrozen?e.jsx(w,{btnText:"Unfreeze app",onClick:h,icon:e.jsx(C,{size:20})}):e.jsx(v,{btnText:"Freeze app",onClick:h,icon:e.jsx(C,{size:20})}),e.jsx(R,{command:`delete ${s.name}`,name:"deleteCommand",value:n.deleteCommand||"",placeholder:`delete ${s.name}`,onChange:g,onSubmit:u})]})]})}function G({label:s,option:c,selectedOption:a,onClick:i}){const n=c===a;return e.jsxs("button",{onClick:i,className:"flex flex-col items-center gap-y-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full border-2 border-gray-300 ${n?"bg-cyan-400":""}`}),e.jsx("p",{className:"text-gray-400",children:s})]})}function I({options:s,onSelect:c}){const[a,i]=m.useState(s[0]);return m.useEffect(()=>{c(a)},[a,c]),e.jsx("ul",{className:"flex gap-x-6",children:s.map((n,f)=>e.jsx(G,{label:n,option:n,selectedOption:a,onClick:()=>i(n)},f))})}const b=10;function D(){const{status:s,overview:c}=N(),[a,i]=m.useState([]),[n,f]=m.useState("name"),[g,u]=m.useState({current:1,latest:1,pageCount:1});m.useEffect(()=>{const t=c.apps;t&&(i(t),u(r=>({...r,pageCount:S(t,b)})))},[c,u]);const h=t=>{const r=a.map(p=>{const y=p[n];return{...p,isVisible:y&&typeof y=="string"?y.toLowerCase().includes(t.toLowerCase()):!1}});i(r),u(p=>({...p,current:t?1:p.latest,pageCount:S(r,b)}))},j=t=>{const r=t.split(" ")[1];f(r)},l=(t,r)=>{u(p=>({...p,current:r,latest:r}))};if(s==="loading")return e.jsx(E,{size:50,color:"white",className:"m-auto"});if(a.length===0)return e.jsx("h2",{className:"text-2xl font-semibold text-cyan-300 ml-[20px] pt-[30px] pb-[60px]",children:"No applications connected"});const o=[...a].filter(t=>t.isVisible).filter((t,r)=>z(r,g.current,b)),d=a.length>b&&o.length>0;return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex gap-x-2 items-center p-4",children:[e.jsx(O,{size:24}),e.jsxs("p",{className:"text-gray-400",children:["ApplicationsÂ ",e.jsx("span",{className:"text-cyan-300 font-semibold",children:L(a.length)})]})]}),e.jsxs("div",{className:"flex flex-col gap-y-6 p-4",children:[e.jsx(T,{onChange:h}),e.jsx(I,{options:["App name","App creator"],onSelect:j}),d&&e.jsx("div",{className:"flex justify-center py-6",children:e.jsx(B,{onChange:l,count:g.pageCount})})]}),o.length===0?e.jsx("h2",{className:"text-2xl font-semibold text-cyan-300 ml-[20px] pt-[30px] pb-[60px]",children:"No matching application"}):e.jsx("ul",{className:"flex flex-col gap-y-16 p-6 my-12",children:o.map(t=>e.jsx("li",{children:e.jsx(F,{appData:t})},t.name))})]})}export{D as default};
